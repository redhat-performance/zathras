# Azure CI Test Scenario
# This scenario is used by GitHub Actions to validate Zathras on Azure
# Runs a standard test suite: linpack, streams, and fio benchmarks

global:
  system_type: azure
  # Azure OS ID should be set via environment variable or passed as parameter
  # cloud_os_id: /subscriptions/.../resourceGroups/.../images/xxx (set in workflow)
  # OR use URN format: Publisher:Offer:Sku:Version
  # ssh_key_file: /path/to/key
  terminate_cloud: 1  # Always clean up resources after testing
  cloud_region: eastus
  cloud_zone: 1
  # Use spot instances for cost savings in CI
  use_spot: 1
  spot_max_price: 0.50

systems:
  ci_test_system:
    # Standard medium instance for testing
    host_config: "Standard_D4s_v3:Disks;number=1;size=100;type=Premium_LRS"
    tests: linpack,streams,fio

    # Test-specific overrides for faster CI runs
    linpack:
      linpack_run_time: 300  # 5 minutes instead of default

    streams:
      streams_run_time: 180  # 3 minutes

    fio:
      fio_runtime: 60  # 1 minute per test
      fio_test_types: "read,write,randread,randwrite"  # Standard I/O patterns
